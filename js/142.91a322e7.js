"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[142],{3142:function(t,e,l){l.r(e),l.d(e,{default:function(){return T}});var s=l(6252),i=l(9963),n=l(3577);const r={class:"main"},d=(0,s.uE)('<div class="container-fluid"><div class="row"><div class="cart-img d-flex justify-content-center"></div></div></div><div class="container mt-5"><div class="row mx-1 mx-md-0 shopping-process position-relative d-flex justify-content-center align-items-center"><ul class="d-flex justify-content-between w-md-75 w-100 w-lg-50 mx-auto"><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2"> 1 </div><p>購物車</p></li><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2"> 2 </div><p>填寫資訊</p></li><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2 circle-active"> 3 </div><p class="process">確認訂單</p></li><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2"> 4 </div><p>完成購物</p></li></ul><div class="line position-absolute"></div></div></div>',2),c={class:"container rounded my-5"},a=(0,s._)("div",{class:"row mx-1 mx-md-0 cart-title-bar cart-title d-flex align-items-center justify-content-center rounded-top"},[(0,s._)("div",{class:"col d-flex align-items-center justify-content-center text-white"},"STEP 3 : 確認訂單")],-1),o={class:"col-12 col-md-6"},u={class:"table align-middle"},h=(0,s._)("thead",null,[(0,s._)("th",{class:"cart-table-img"},"產品"),(0,s._)("th",null,"品名"),(0,s._)("th",null,"數量"),(0,s._)("th",{class:"text-end"},"價錢")],-1),p={class:"border-top"},m=["src"],_={class:"text-end"},v=(0,s._)("td",{colspan:"3",class:"text-end"},null,-1),g={class:"text-end"},f={class:"col-12 col-md-6"},x={class:"table"},w=(0,s._)("thead",null,[(0,s._)("th",null,"購買者資訊")],-1),y={class:"border-top"},b=(0,s._)("th",{width:"100"},"Email",-1),j=(0,s._)("th",null,"姓名",-1),k=(0,s._)("th",null,"收件人電話",-1),$=(0,s._)("th",null,"收件人地址",-1),z=(0,s._)("th",null,"付款狀態",-1),L={key:0},O={key:1,class:"text-success"},D={class:"col-12"},I={key:0,class:"text-end"};function q(t,e,l,q,C,E){const M=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(M,{active:C.isLoading,"z-index":1060},null,8,["active"]),(0,s._)("div",r,[d,(0,s._)("div",c,[a,(0,s._)("div",{class:"row mx-1 mx-md-0 py-3 justify-content-center align-items-top border",onClick:e[1]||(e[1]=(0,i.iM)(((...t)=>E.payOrder&&E.payOrder(...t)),["prevent"]))},[(0,s._)("div",o,[(0,s._)("table",u,[h,(0,s._)("tbody",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.order.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,[(0,s._)("img",{src:t.product.imageUrl,alt:"item.title",class:"picture"},null,8,m)]),(0,s._)("td",null,(0,n.zw)(t.product.title),1),(0,s._)("td",null,(0,n.zw)(t.qty)+"/"+(0,n.zw)(t.product.unit),1),(0,s._)("td",_,"NT$"+(0,n.zw)(t.final_total),1)])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[v,(0,s._)("td",g,"總計 : NT$"+(0,n.zw)(C.order.total),1)])])])]),(0,s._)("div",f,[(0,s._)("table",x,[w,(0,s._)("tbody",y,[(0,s._)("tr",null,[b,(0,s._)("td",null,(0,n.zw)(C.order.user.email),1)]),(0,s._)("tr",null,[j,(0,s._)("td",null,(0,n.zw)(C.order.user.name),1)]),(0,s._)("tr",null,[k,(0,s._)("td",null,(0,n.zw)(C.order.user.tel),1)]),(0,s._)("tr",null,[$,(0,s._)("td",null,(0,n.zw)(C.order.user.address),1)]),(0,s._)("tr",null,[z,(0,s._)("td",null,[C.order.is_paid?((0,s.wg)(),(0,s.iD)("span",O,"付款完成")):((0,s.wg)(),(0,s.iD)("span",L,"尚未付款"))])])])])]),(0,s._)("div",D,[!1===C.order.is_paid?((0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...t)=>E.payOrder&&E.payOrder(...t))},"確認付款")])):(0,s.kq)("",!0)])])])])],64)}var C=l(5011),E={data(){return{order:{user:{}},orderId:"",isLoading:!1}},inject:["emitter"],methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/v2//api/xqrass-hexschool/order/${this.orderId}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.order=t.data.order,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"錯誤訊息")}))},payOrder(){const t=`https://vue3-course-api.hexschool.io/v2//api/xqrass-hexschool/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(t).then((t=>{C.Z.emit("get-cart"),this.$router.push(`/final/${this.orderId}`),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"錯誤訊息")}))}},mounted(){this.orderId=this.$route.params.orderId,this.getOrder()}},M=l(3744);const S=(0,M.Z)(E,[["render",q]]);var T=S}}]);
//# sourceMappingURL=142.91a322e7.js.map