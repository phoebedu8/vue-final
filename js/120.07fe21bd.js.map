{"version":3,"file":"js/120.07fe21bd.js","mappings":"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","sources":["webpack://vue-final/./src/components/PaginationView.vue","webpack://vue-final/./src/components/PaginationView.vue?d04d","webpack://vue-final/./src/views/front/ProductsView.vue","webpack://vue-final/./src/views/front/ProductsView.vue?d3b5"],"sourcesContent":["<template>\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination justify-content-center\">\n      <li :class=\"{ disabled: !pages.has_pre }\" class=\"page-item\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"updatePage(pages.current_page - 1)\">\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\"\n        :class=\"{ active: pages.current_page === page }\">\n        <span class=\"page-link\" v-if=\"page === pages.current_page\">\n          {{ page }}\n        </span>\n        <a class=\"page-link\" v-else href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a>\n      </li>\n      <li class=\"page-item\" :class=\"{ disabled: !pages.has_next }\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"updatePage(pages.current_page + 1)\">\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\nexport default {\n  props: ['pages'],\n  methods: {\n    updatePage (page) {\n      this.$emit('emitPages', page)\n    }\n  }\n}\n\n</script>\n","import { render } from \"./PaginationView.vue?vue&type=template&id=55ccbd45\"\nimport script from \"./PaginationView.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/phoebe/Desktop/vue-final/vue-final/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <Loading :active=\"isLoading\" :z-index=\"1060\"></Loading>\n  <div class=\"container-fluid\">\n    <div class=\"row\">\n      <div class=\"product-img d-flex justify-content-center align-items-center\"></div>\n    </div>\n  </div>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <h2 class=\"text-center text-danger my-5\">Cosmos 手工冰淇淋</h2>\n      </div>\n    </div>\n  </div>\n  <div class=\"container\">\n    <div class=\"row\">\n      <ul class=\"col-12 d-flex justify-content-center category mb-5\">\n        <li class=\"category-btn\" :class=\"isActive === '' ? 'active' : '' \" @click=\"getProducts('',1)\">\n          <router-link :to=\" { query: { category: 'all', page: 1 } }\">\n            全部商品\n          </router-link>\n        </li>\n        <li class=\"category-btn\" :class=\"isActive === '甜筒' ? 'active' : '' \" @click=\"getProducts('甜筒'),1\">\n          <router-link :to=\" { query: { category: '甜筒', page: 1 } }\">\n            甜筒系列\n          </router-link>\n        </li>\n        <li class=\"category-btn\" :class=\"isActive === '冰沙' ? 'active' : '' \" @click=\"getProducts('冰沙',1)\">\n          <router-link :to=\" { query: { category: '冰沙', page: 1} }\">\n            冰沙系列\n          </router-link>\n        </li>\n        <li class=\"category-btn\" :class=\"isActive === '冰棒' ? 'active' : '' \" @click=\"getProducts('冰棒',1)\">\n          <router-link :to=\" { query: { category: '冰棒', page: 1 } }\">\n            冰棒系列\n          </router-link>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class=\"container\">\n    <div class=\"row row-cols-2 row-cols-sm-3 row-cols-lg-5 g-4 mb-13\">\n      <div class=\"col\" v-for=\"item in products\" :key=\"item.id\">\n        <div class=\"card\">\n          <router-link :to=\"`/product/${ item.id }`\" class=\"card-img card-img-rotate\">\n            <img :src=\"item.imageUrl\" class=\"card-img-top rounded-3\" alt=\"item.title\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title\">{{ item.title }}</h4>\n              <h5 class=\"card-text text-danger\">NT${{ item.price }}\n                <span class=\"card-text ms-2 fs-6\">\n                  <del class=\"text-gray \">NT${{ item.origin_price }}</del>\n                </span>\n              </h5>\n            </div>\n          </router-link>\n          <div class=\"product-btn-group\">\n            <button type=\"button\" class=\"add-favorite btn btn-danger rounded-circle\"\n              @click=\"toggleFavorite(item.id)\" v-if=\"favorite.includes(item.id)\">\n              <i class=\"bi bi-heart-fill\"></i>\n            </button>\n            <button type=\"button\" class=\"add-favorite btn btn-outline-danger rounded-circle\"\n              @click=\"toggleFavorite(item.id)\" v-else>\n              <i class=\"bi bi-heart\"></i>\n            </button>\n            <button type=\"button\" class=\"add-cart-btn btn btn-outline-danger\" @click=\"addToCart(item.id)\">\n              加到購物車\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-12 my-5\">\n        <PaginationView :pages=\"pagination\"\n          @emit-pages=\"getProducts(category, $event)\">\n        </PaginationView>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/eventBus'\nimport PaginationView from '@/components/PaginationView.vue'\n\nexport default {\n  data () {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isNew: false,\n      isLoading: false,\n      product: {},\n      status: {\n        loadingItem: ''\n      },\n      coupon_code: '',\n      currentPage: 1,\n      cart: {},\n      isActive: '',\n      category: '',\n      favorite: JSON.parse(localStorage.getItem('favorite')) || []\n    }\n  },\n  inject: ['emitter'],\n  components: {\n    PaginationView\n  },\n  methods: {\n    getProducts (category, page = 1) {\n      this.isLoading = true\n      this.currentPage = page\n      this.isActive = ''\n      this.category = category\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?page=${page}`\n      if (category) {\n        api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?category=${category}&page=${page}`\n        this.isActive = category\n      }\n      this.$http.get(api).then((response) => {\n        this.products = response.data.products\n        this.pagination = response.data.pagination\n        this.isLoading = false\n      }).catch((error) => {\n        this.isLoading = false\n        this.$httpMessageState(error.response, '錯誤訊息')\n      })\n    },\n    getProduct (id) {\n      this.$router.push(`/product/${id}`)\n    },\n    addToCart (id, qty = 1) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\n      const cart = {\n        product_id: id,\n        qty\n      }\n      this.$http.post(url, {\n        data: cart\n      }).then((response) => {\n        emitter.emit('get-cart')\n        this.isLoading = false\n        this.$swal({\n          title: '成功加入購物車',\n          icon: 'success',\n          confirmButtonColor: '#dc3545'\n        })\n        // this.getCart()\n      }).catch((error) => {\n        this.isLoading = false\n        this.$httpMessageState(error.response, '錯誤訊息')\n      })\n    },\n    toggleFavorite (id) {\n      emitter.emit('get-favorite')\n      console.log(id)\n      const favoriteIndex = this.favorite.findIndex(item => item === id)\n      if (favoriteIndex === -1) {\n        this.favorite.push(id)\n      } else {\n        this.favorite.splice(favoriteIndex, 1)\n      }\n      console.log(this.favorite)\n    }\n  },\n  watch: {\n    favorite: {\n      handler () {\n        localStorage.setItem('favorite', JSON.stringify(this.favorite))\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    this.getProducts()\n  }\n}\n\n</script>\n","import { render } from \"./ProductsView.vue?vue&type=template&id=14802b2e\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/phoebe/Desktop/vue-final/vue-final/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_3","_hoisted_7","_createElementBlock","disabled","$props","has_pre","href","onClick","$options","current_page","_Fragment","_renderList","total_pages","page","active","key","_toDisplayString","_hoisted_6","has_next","props","methods","updatePage","this","$emit","__exports__","render","_hoisted_21","_hoisted_24","_createVNode","_component_Loading","$data","_hoisted_1","_component_router_link","to","query","category","item","id","src","imageUrl","alt","title","price","origin_price","includes","type","_hoisted_26","_component_PaginationView","pages","onEmitPages","$event","data","products","pagination","tempProduct","isNew","isLoading","product","status","loadingItem","coupon_code","currentPage","cart","isActive","favorite","JSON","parse","localStorage","getItem","inject","components","PaginationView","getProducts","api","$http","get","then","response","catch","error","$httpMessageState","getProduct","$router","push","addToCart","qty","url","product_id","post","emitter","$swal","icon","confirmButtonColor","toggleFavorite","console","log","favoriteIndex","findIndex","splice","watch","handler","setItem","stringify","deep","mounted"],"sourceRoot":""}