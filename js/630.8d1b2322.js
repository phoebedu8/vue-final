"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[630],{3630:function(t,e,s){s.r(e),s.d(e,{default:function(){return It}});var i=s(6252),l=s(3577),c=s(9963);const n={class:"main"},a=(0,i.uE)('<div class="container-fluid"><div class="row"><div class="cart-img d-flex justify-content-center"></div></div></div><div class="container pt-5"><div class="row mx-1 mx-md-0 shopping-process position-relative d-flex justify-content-center align-items-center"><ul class="d-flex justify-content-between w-100 mx-auto"><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2 circle-active"> 1 </div><p class="process">購物車</p></li><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2"> 2 </div><p>填寫資訊</p></li><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2"> 3 </div><p>確認訂單</p></li><li class="d-flex flex-column align-items-center"><div class="d-flex align-items-center justify-content-center circle rounded-circle mb-2"> 4 </div><p>完成購物</p></li></ul><div class="line position-absolute"></div></div></div>',2),o={class:"container rounded my-5"},d=(0,i._)("div",{class:"row mx-1 mx-md-0 cart-title-bar cart-title d-flex align-items-center justify-content-center rounded-top"},[(0,i._)("div",{class:"col d-flex align-items-center justify-content-center text-white"},"STEP 1 : 購物車")],-1),r={class:"row mx-1 mx-md-0 py-3 justify-content-center border"},u={key:0,class:"my-5"},p=(0,i._)("p",{class:"text-center mb-4"},"請加入產品",-1),v={class:"d-flex align-items-center justify-content-center"},m=(0,i._)("div",{class:"btn btn-outline-danger",type:"button"}," 返回繼續購物",-1),h={key:1},g={class:"w-100 d-none d-md-block"},_={class:"container"},b=(0,i.uE)('<div class="row border-bottom"><div class="col-1 fw-bolder text-center">取消</div><div class="col-2 fw-bolder text-center">產品</div><div class="col fw-bolder">品名</div><div class="col fw-bolder">單價</div><div class="col-3 fw-bolder">數量</div><div class="col fw-bolder text-end">總價</div></div>',1),f={class:"col-1 text-center"},x=["disabled","onClick"],w=(0,i._)("i",{class:"bi bi-x"},null,-1),y=[w],C={class:"col-2"},k=["src"],$={class:"col align-items-center"},L={class:"mb-2"},U={class:"col"},q={class:"col-3"},D=["onUpdate:modelValue","onChange"],j={class:"col text-end"},I={key:0,class:"text-success"},z={class:"row border-bottom"},M={class:"input-group my-3"},S={class:"input-group-append"},T={class:"row border-bottom"},V={class:"col-4 my-3"},W=(0,i._)("i",{class:"bi bi-trash"},null,-1),A=(0,i.Uk)(" 清空購物車 "),N=[W,A],B={class:"col-8 my-3 text-end"},H={key:0,class:"text-success text-end"},Y={key:1},E={class:"row"},Z={class:"col-3 my-3 align-self-center"},K=(0,i._)("i",{class:"bi bi-chevron-left"},null,-1),P=(0,i.Uk)(" 返回繼續購物 "),F={class:"col-3 my-3 ms-auto align-self-center"},G=(0,i.Uk)(" 前往結帳 "),J={class:"cart d-block d-md-none"},O={class:"row align-items-center"},Q={class:"col-4"},R=["src"],X={class:"col-8 d-flex align-self-center"},tt={class:"mb-2"},et={class:"mb-2 d-flex input-group input-group-sm"},st=["onUpdate:modelValue","onChange"],it={class:"text-end w-50 align-self-center"},lt={class:"mb-2"},ct=["disabled","onClick"],nt=(0,i._)("i",{class:"bi bi-x"},null,-1),at=[nt],ot=(0,i._)("hr",null,null,-1),dt={class:"row"},rt={class:"input-group"},ut={class:"input-group-append"},pt={class:"row mb-4"},vt={class:"col-4"},mt=(0,i._)("i",{class:"bi bi-trash"},null,-1),ht=(0,i.Uk)(" 清空購物車 "),gt=[mt,ht],_t={class:"col-8 text-end"},bt={key:0,class:"text-success text-end"},ft={key:1},xt=(0,i._)("hr",null,null,-1),wt={class:"row"},yt={class:"col-5 align-self-center"},Ct=(0,i._)("div",{class:"text-secondary"},[(0,i._)("i",{class:"bi bi-chevron-left"}),(0,i.Uk)(" 返回繼續購物 ")],-1),kt={class:"col-7 align-self-center"},$t=(0,i.Uk)("前往結帳");function Lt(t,e,s,w,W,A){const nt=(0,i.up)("Loading"),mt=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(nt,{active:W.isLoading,"z-index":1060},null,8,["active"]),(0,i._)("div",n,[a,(0,i._)("div",o,[d,(0,i._)("div",r,[W.cart.carts.length<=0?((0,i.wg)(),(0,i.iD)("div",u,[p,(0,i._)("div",v,[(0,i.Wm)(mt,{to:"/products"},{default:(0,i.w5)((()=>[m])),_:1})])])):((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",g,[(0,i._)("div",_,[b,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(W.cart.carts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"row align-items-center border-bottom"},[(0,i._)("div",f,[(0,i._)("button",{type:"button",class:"mb-2 btn btn-outline-danger btn-sm",disabled:W.status.loadingItem===e.id,onClick:t=>A.removeCartItem(e.id)},y,8,x)]),(0,i._)("div",C,[(0,i._)("img",{src:e.product.imageUrl,alt:"item.title",class:"img-fluid text-center"},null,8,k)]),(0,i._)("div",$,[(0,i._)("div",L,(0,l.zw)(e.product.title),1)]),(0,i._)("div",U," NT$"+(0,l.zw)(e.product.price),1),(0,i._)("div",q,[(0,i.wy)((0,i._)("input",{class:"w-75 text-center",type:"number",min:"1","onUpdate:modelValue":t=>e.qty=t,onChange:t=>A.updateCart(e)},null,40,D),[[c.nr,e.qty,void 0,{number:!0}]])]),(0,i._)("div",j,[W.cart.final_total!==W.cart.total?((0,i.wg)(),(0,i.iD)("small",I,"折扣價：")):(0,i.kq)("",!0),(0,i.Uk)(" NT "+(0,l.zw)(t.$filters.currency(e.final_total)),1)])])))),128)),(0,i._)("div",z,[(0,i._)("div",M,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>W.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[c.nr,W.coupon_code]]),(0,i._)("div",S,[(0,i._)("button",{class:"btn btn-outline-secondary coupon-btn",type:"button",onClick:e[1]||(e[1]=(...t)=>A.addCouponCode&&A.addCouponCode(...t))}," 套用優惠碼 ")])])]),(0,i._)("div",T,[(0,i._)("div",V,[(0,i._)("a",{class:"w-100 text-secondary",onClick:e[2]||(e[2]=(0,c.iM)(((...t)=>A.deleteAllCarts&&A.deleteAllCarts(...t)),["prevent"]))},N)]),(0,i._)("div",B,[(0,i._)("div",null,[W.cart.final_total!==W.cart.total?((0,i.wg)(),(0,i.iD)("span",H,"折扣價：")):((0,i.wg)(),(0,i.iD)("span",Y," 總價: ")),(0,i.Uk)(" NT "+(0,l.zw)(t.$filters.currency(W.cart.final_total)),1)])])]),(0,i._)("div",E,[(0,i._)("div",Z,[(0,i.Wm)(mt,{to:"/products",class:"text-secondary"},{default:(0,i.w5)((()=>[K,P])),_:1})]),(0,i._)("div",F,[(0,i.Wm)(mt,{to:"/cartInfo",class:"btn btn-danger w-100",type:"button"},{default:(0,i.w5)((()=>[G])),_:1})])])])]),(0,i._)("div",J,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(W.cart.carts,(t=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t.id},[(0,i._)("div",O,[(0,i._)("div",Q,[(0,i._)("img",{src:t.product.imageUrl,alt:"item.title",class:"img-fluid"},null,8,R)]),(0,i._)("div",X,[(0,i._)("div",null,[(0,i._)("div",tt,(0,l.zw)(t.product.title),1),(0,i._)("div",et,[(0,i.wy)((0,i._)("input",{class:"w-75 text-center",type:"number",min:"1","onUpdate:modelValue":e=>t.qty=e,onChange:e=>A.updateCart(t)},null,40,st),[[c.nr,t.qty,void 0,{number:!0}]])])]),(0,i._)("div",it,[(0,i._)("div",lt," NT$"+(0,l.zw)(t.product.price),1),(0,i._)("button",{type:"button",class:"mb-2 btn btn-outline-danger btn-sm",disabled:W.status.loadingItem===t.id,onClick:e=>A.removeCartItem(t.id)},at,8,ct)])])]),ot],64)))),128)),(0,i._)("div",dt,[(0,i._)("div",rt,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":e[3]||(e[3]=t=>W.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[c.nr,W.coupon_code]]),(0,i._)("div",ut,[(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[4]||(e[4]=(...t)=>A.addCouponCode&&A.addCouponCode(...t))}," 套用優惠碼 ")])])]),(0,i._)("div",pt,[(0,i._)("div",vt,[(0,i._)("a",{class:"w-100 text-secondary",onClick:e[5]||(e[5]=(0,c.iM)(((...t)=>A.deleteAllCarts&&A.deleteAllCarts(...t)),["prevent"]))},gt)]),(0,i._)("div",_t,[(0,i._)("div",null,[W.cart.final_total!==W.cart.total?((0,i.wg)(),(0,i.iD)("span",bt,"折扣價：")):((0,i.wg)(),(0,i.iD)("span",ft," 總價: ")),(0,i.Uk)(" NT "+(0,l.zw)(t.$filters.currency(W.cart.final_total)),1)])])]),xt,(0,i._)("div",wt,[(0,i._)("div",yt,[(0,i.Wm)(mt,{to:"/products"},{default:(0,i.w5)((()=>[Ct])),_:1})]),(0,i._)("div",kt,[(0,i.Wm)(mt,{to:"/cartInfo",class:"btn btn-danger w-100",type:"button"},{default:(0,i.w5)((()=>[$t])),_:1})])])])]))])])])],64)}var Ut=s(5011),qt={data(){return{products:[],product:{},status:{loadingItem:""},cart:{carts:[]},isLoading:!1,coupon_code:"",qty:""}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/v2//api/xqrass-hexschool/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"錯誤訊息")}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/v2//api/xqrass-hexschool/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{Ut.Z.emit("get-cart"),this.$swal({title:"移除購物車品項",icon:"success",confirmButtonColor:"#dc3545"}),this.isLoading=!1,this.getCart()})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"移除購物車品項失敗")}))},deleteAllCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2//api/xqrass-hexschool/carts";this.$http.delete(t).then((t=>{Ut.Z.emit("get-cart"),this.$swal({title:"移除所有品項",icon:"success",confirmButtonColor:"#dc3545"}),this.getCart(),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"移除所有品項失敗")}))},updateCart(t){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/v2//api/xqrass-hexschool/cart/${t.id}`,s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.$swal({title:"更新數量成功",icon:"success",confirmButtonColor:"#dc3545"}),this.isLoading=!1,this.getCart()})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"更新數量失敗")}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/v2//api/xqrass-hexschool/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$swal({title:"加入優惠券成功",icon:"success",confirmButtonColor:"#dc3545"}),this.getCart(),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t.response,"加入優惠券失敗")}))}},created(){this.getCart()}},Dt=s(3744);const jt=(0,Dt.Z)(qt,[["render",Lt]]);var It=jt}}]);
//# sourceMappingURL=630.8d1b2322.js.map